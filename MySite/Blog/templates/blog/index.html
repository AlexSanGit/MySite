{% extends 'blog/base.html' %}

{% block content %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %}
        class="{{ message.tags }}"
        {% endif %}>
        {{ message}}
    </li>
    {% endfor %}
</ul>
{% endif %}

<div class="content-index">
    <ul>
        {% for p in posts %}
        <li class="content-index2">
            <div>
                <p>Категория: {{p.cat_post}}</p>
                <p>Дата публикации: {{p.time_update|date:"d-m-Y H:i"}}</p>
                <p class="user-post"> Написал: {{p.author}}
                    <img class="avatar" src="{{ p.author.profile.image.url }}"
                         alt="Avatar"/>
                </p>
                <p class="index-title">{{p.title}}</p>

            </div>
            <div class="row">
                {% for image in p.post_images.all %}
                <img class="img-index" src="{{ image.image.url }}"
                     alt="Изображение">
                {% endfor %}
            </div>
                <p class="post-description">{{p.description}}</p>

            <p>Коментариев: ({{p.comments_posts.all.count}})</p>
            <p class="link-read-post"><a href="{{ p.get_absolute_url }}">Подробнее</a></p>


            {% endfor %}

        </li>
    </ul>
    {% endblock %}

</div>


<script>
  setTimeout(function() {
    document.querySelectorAll('.messages li').forEach(function(message) {
      message.remove();
    });
  }, 3000);



</script>







