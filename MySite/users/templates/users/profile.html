<!-- profile.html -->

{% extends "blog/base.html" %}
{% load crispy_forms_tags %}
{% load custom_tags %}
{% block content %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %}
        class="{{ message.tags }}"
        {% endif %}>
        {{ message }}
    </li>
    {% endfor %}
</ul>
{% endif %}

<table border=0 cellpadding="0" cellspacing="0">
<h2 class="border-bottom mb-4">Ваш профиль</h2>
    <tr>
        <th>
            <div class="content-section">
                <div class="media">
                    <!-- Ваш код для отображения профиля -->
                </div>

                <!-- Форма обновления профиля -->
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <fieldset class="form-group">
                        {{ u_form|crispy }}
                        {{ p_form|crispy }}
                    </fieldset>

                    <div class="form-group">
                        <button class="btn btn-outline-info" type="submit">Обновить</button>
                    </div>
                </form>

                <!-- Ссылка на уведомления с восклицательным знаком -->
                <a href="{% url 'show_notifications' %}" class="btn btn-info">
                    {% if profile.notifications %}
                        Мои уведомления <span class="badge badge-danger">!</span>
                    {% else %}
                        Мои уведомления
                    {% endif %}
                </a>
            </div>
        </th>
    </tr>
</table>

{% endblock content %}
